{namespace dv=Slub\Dfgviewer\ViewHelpers}
<div xmlns="http://www.w3.org/1999/xhtml" lang="en" xmlns:f="http://typo3.org/ns/fluid/ViewHelpers">

<f:section name="PageView">
  <div class="document-view">
    <f:if condition="{gp-pagegrid} == 1">
      <f:then>
        <f:cObject typoscriptObjectPath="plugin.tx_dlf_pagegrid" />
      </f:then>
      <f:else>
        <f:if condition="{isNewspaper} == 'newspaper_anchor'">
          <f:then>
            <f:cObject typoscriptObjectPath="plugin.tx_dfgviewer_newspaperyears" />
          </f:then>
          <f:else>
          <f:if condition="{isNewspaper} == 'newspaper_year'">
            <f:then>
              <f:cObject typoscriptObjectPath="plugin.tx_dfgviewer_newspapercalendar" />
            </f:then>
            <f:else>
              <f:if condition="{isNewspaper} == 'newspaper_issue'">
                <!-- it's an newspaper! -->
              </f:if>
                <f:cObject typoscriptObjectPath="plugin.tx_dlf_pageview" />
                <div class="fulltext-container"><div id="tx-dlf-fulltextselection"></div></div>
            </f:else>
          </f:if>
        </f:else>
      </f:if>
      </f:else>
    </f:if>
    <div class="document-functions">
        <div class="provider">
          <f:link.external uri="<dv:xpath xpath='(//mets:amdSec/mets:rightsMD/mets:mdWrap[@OTHERMDTYPE=\"DVRIGHTS\"]/mets:xmlData/dv:rights/dv:ownerSiteURL)[1]' />" title="<dv:xpath xpath='(//mets:amdSec/mets:rightsMD/mets:mdWrap[@OTHERMDTYPE=\"DVRIGHTS\"]/mets:xmlData/dv:rights/dv:owner)[1]' />">
          <img src="<dv:xpath xpath='(//mets:amdSec/mets:rightsMD/mets:mdWrap[@OTHERMDTYPE=\'DVRIGHTS\']/mets:xmlData/dv:rights/dv:ownerLogo)[1]' />"
            title="<dv:xpath xpath='(//mets:amdSec/mets:rightsMD/mets:mdWrap[@OTHERMDTYPE=\'DVRIGHTS\']/mets:xmlData/dv:rights/dv:owner)[1]' />"
            alt="Abbildung eines Logo"
            />
          </f:link.external>

          <dl class="mobile-meta">
            <dt class="tx-dlf-title">Titel</dt>
            <dd class="tx-dlf-title">
              <a href="#">
                <dv:xpath xpath='(//mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:titleInfo[not(@type="alternative")]/mods:nonSort | //mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:titleInfo[not(@type="alternative")]/mods:title | //mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:titleInfo[not(@type="alternative")]/mods:partNumber | //mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:titleInfo[not(@type="alternative")]/mods:partName)[1]' />
              </a>
            </dd>
            <dt>Autor</dt>
            <dd><dv:xpath xpath='(//mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:relatedItem[@type="host"]/mods:name[//mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:name/mods:role/mods:roleTerm[@authority="marcrelator"][@type="code"]="aut"]/mods:displayForm)[1]' />
            </dd>
          </dl>
        </div>

      <ul>
          <li class="submenu links">
            <a href="#" title="Links">Links</a>
            <ul>
              <li>
                  <f:link.external uri="<dv:xpath xpath='(//mets:amdSec/mets:digiprovMD/mets:mdWrap[@OTHERMDTYPE=\"DVLINKS\"]/mets:xmlData/dv:links/dv:presentation)[1]' />" class="local-presentation" title="<f:translate key='provider.local_presentation' extensionName='dfgviewer' />"><f:translate key='provider.local_presentation' extensionName='dfgviewer' /></f:link.external>
              </li>
              <f:for each="{0: '1', 1: '2', 2: '3'}" as="index">
                <f:if condition="<dv:xpath xpath='(//mets:amdSec/mets:digiprovMD/mets:mdWrap[@OTHERMDTYPE=\"DVLINKS\"]/mets:xmlData/dv:links/dv:reference)[{index}]' />">
                  <li>
                    <f:if condition="<dv:xpath xpath='(//mets:amdSec/mets:digiprovMD/mets:mdWrap[@OTHERMDTYPE=\"DVLINKS\"]/mets:xmlData/dv:links/dv:reference/@linktext)[{index}]' />">
                      <f:then>
                        <f:link.external uri="<dv:xpath xpath='(//mets:amdSec/mets:digiprovMD/mets:mdWrap[@OTHERMDTYPE=\"DVLINKS\"]/mets:xmlData/dv:links/dv:reference)[{index}]' />" class="local-catalog" title="<f:translate key='provider.local_catalogue' extensionName='dfgviewer' />"><dv:xpath xpath='(//mets:amdSec/mets:digiprovMD/mets:mdWrap[@OTHERMDTYPE="DVLINKS"]/mets:xmlData/dv:links/dv:reference/@linktext)[{index}]' /></f:link.external>
                      </f:then>
                      <f:else>
                        <f:link.external uri="<dv:xpath xpath='(//mets:amdSec/mets:digiprovMD/mets:mdWrap[@OTHERMDTYPE=\"DVLINKS\"]/mets:xmlData/dv:links/dv:reference)[{index}]' />" class="local-catalog" title="<f:translate key='provider.local_catalogue' extensionName='dfgviewer' />"><f:translate key='provider.local_catalogue' extensionName='dfgviewer' /></f:link.external>
                      </f:else>
                    </f:if>
                  </li>
                </f:if>
              </f:for>
              <li>
                  <f:link.email email="<dv:xpath xpath='(//mets:amdSec/mets:rightsMD/mets:mdWrap[@OTHERMDTYPE=\"DVRIGHTS\"]/mets:xmlData/dv:rights/dv:ownerContact)[1]' />" class="local-contact" title="<f:translate key='provider.email_provider' extensionName='dfgviewer' /> (<dv:xpath xpath='//mets:amdSec/mets:rightsMD/mets:mdWrap[@OTHERMDTYPE=\'DVRIGHTS\']/mets:xmlData/dv:rights/dv:owner' />)"><f:translate key='provider.email_provider' extensionName='dfgviewer' /></f:link.email>
              </li>
                <f:cObject typoscriptObjectPath="plugin.tx_dfgviewer_uri" />
            </ul>
          </li>
          <li class="submenu downloads">
            <a href="#" title="Downloads">Downloads</a>
            <ul>
            <f:if condition="<dv:piVars var=\"double\" default=\"0\" /> == 1">
              <f:then>
                <li>
                  <f:link.external uri="<dv:downloadLinks type='page-left' pagenumber='{gp-page}' />" class="download-page" title="<f:translate key='download.leftPage' extensionName='dfgviewer' />"><f:translate key="download.leftPage"  extensionName="dfgviewer" /></f:link.external>
                </li>
                <f:if condition="<dv:downloadLinks type='page-right' pagenumber='{gp-page}' /> !=''">
                  <li>
                    <f:link.external uri="<dv:downloadLinks type='page-right' pagenumber='{gp-page}' />" class="download-page" title="<f:translate key='download.rightPage' extensionName='dfgviewer' />"><f:translate key="download.rightPage"  extensionName="dfgviewer" /></f:link.external>
                  </li>
                </f:if>
              </f:then>
              <f:else>
                <f:if condition="<dv:downloadLinks type='page-left' pagenumber='{gp-page}' /> !=''">
                  <li>
                    <f:link.external uri="<dv:downloadLinks type='page-left' pagenumber='{gp-page}' />" class="download-page" title="<f:translate key='download.singlePage' extensionName='dfgviewer' />"><f:translate key="download.singlePage"  extensionName="dfgviewer" /></f:link.external>
                  </li>
                </f:if>
            </f:else>
          </f:if>
          <f:if condition="<dv:downloadLinks type='work' /> !=''">
            <f:then>
              <li>
                <f:link.external
                  uri="<dv:downloadLinks type='work' />"
                  class="download-document"
                  target="_blank"
                  title="<f:translate key='download.work' extensionName='dfgviewer' />"><f:translate key="download.work"  extensionName="dfgviewer" /></f:link.external>
              </li>
            </f:then>
            <f:else>
              <f:if condition="<dv:xpath xpath='(//mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/slub:slub/slub:id[@type=\'digital\'])[1]' />">
                <li>
                  <f:link.external
                    uri="http://digital.slub-dresden.de/fileadmin/data/<dv:xpath xpath='(//mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/slub:slub/slub:id[@type=\'digital\'])[1]' />/<dv:xpath xpath='(//mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/slub:slub/slub:id[@type=\'digital\'])[1]' />_tif/jpegs/<dv:xpath xpath='(//mets:mets/mets:dmdSec/mets:mdWrap/mets:xmlData/mods:mods/mods:extension/slub:slub/slub:id[@type=\'digital\'])[1]' />.pdf"
                    class="download-document"
                    target="_blank"
                    title="<f:translate key='download.work' extensionName='dfgviewer' />"><f:translate key="download.work"  extensionName="dfgviewer" />
                  </f:link.external>
                </li>
              </f:if>
            </f:else>
          </f:if>
            </ul>
          </li>
          <li class="doublepage">
            <f:if condition="{gp-double} == 1">
              <f:then>
                <f:link.page pageUid="{kitodoPageView}" additionalParams="{0: {tx_dlf:{page:'{gp-page}', double:'0', id:'{gp-id}', pagegrid:'0'}}}" class="tx-dlf-navigation-doubleOff" title="<f:translate key='double.singlePageView'  extensionName='dfgviewer' />"><f:translate key="double.singlePageView"  extensionName="dfgviewer" /></f:link.page>
                <f:link.page pageUid="{kitodoPageView}" additionalParams="{0: {tx_dlf:{page:'{dv:calc(val1:\'{gp-page}\', val2:\'1\', operator:\'+\')}', double:'1', id:'{gp-id}', pagegrid:'0'}}}" class="tx-dlf-navigation-doublePlusOne" title="<f:translate key='double.RectoVerso' extensionName='dfgviewer' />"><span><f:translate key="double.RectoVerso"  extensionName="dfgviewer" /></span></f:link.page>
              </f:then>
              <f:else>
                <f:link.page pageUid="{kitodoPageView}" additionalParams="{0: {tx_dlf:{page:'{gp-page}', double:'1', id:'{gp-id}', pagegrid:'0'}}}" class="tx-dlf-navigation-doubleOn" title="<f:translate key='double.doublePageView'  extensionName='dfgviewer' />"><f:translate key="double.doublePageView"  extensionName="dfgviewer" /></f:link.page>
              </f:else>
            </f:if>
          </li>
          <f:if condition="<dv:xpath xpath='(//mets:fileSec/mets:fileGrp[@USE=\"FULLTEXT\"]/mets:file[1]/mets:FLocat/@xlink:href)[1]' />">
            <li class="fulltext">
              <f:if condition="{gp-double} == 1">
                <f:then>
                  <span class="select switchoff" id="tx-dlf-tools-fulltext" title="<f:translate key='fulltext.no_fulltext_double' extensionName='dfgviewer' />"><f:translate key='fulltext.no_fulltext_double' extensionName='dfgviewer' /></span>
                </f:then>
                <f:else>
                  <f:if condition="{gp-pagegrid} == 1">
                    <f:then>
                      <span class="select switchoff" id="tx-dlf-tools-fulltext" title="<f:translate key='fulltext.no_fulltext_gridpage' extensionName='dfgviewer' />"><f:translate key='fulltext.no_fulltext_gridpage' extensionName='dfgviewer' /></span>
                    </f:then>
                    <f:else>
                      <f:cObject typoscriptObjectPath="lib.tools.toolsFulltext" />
                    </f:else>
                  </f:if>
                </f:else>
              </f:if>
            </li>
          </f:if>
          <f:if condition="<dv:xpath xpath='(//mets:fileSec/mets:fileGrp[@USE=\"THUMBS\"]//mets:file/mets:FLocat/@xlink:href)[1]' />">
            <f:then>
              <f:if condition="{gp-pagegrid} == 1">
                <f:then>
                  <li class="grid">
                      <f:link.page pageUid="{kitodoPageView}" additionalParams="{0: {tx_dlf:{page:'{gp-page}', double:'0', id:'{gp-id}', pagegrid:'0'}}}" class="active" title="<f:translate key='double.singlePageView' extensionName='dfgviewer' />"><f:translate key='double.singlePageView' extensionName='dfgviewer' /></f:link.page>
                  </li>
                </f:then>
                <f:else>
                  <li class="grid">
                      <f:link.page pageUid="{kitodoPageView}" additionalParams="{0: {tx_dlf:{page:'{gp-page}', double:'0', id:'{gp-id}', pagegrid:'1'}}}" title="<f:translate key='gridpage.preview' extensionName='dfgviewer' />"><f:translate key='gridpage.preview' extensionName='dfgviewer' /></f:link.page>
                  </li>
                </f:else>
              </f:if>
            </f:then>
          </f:if>
          <f:if condition="<dv:xpath xpath='//mets:amdSec/mets:digiprovMD/mets:mdWrap[@OTHERMDTYPE=\"DVLINKS\"]/mets:xmlData/dv:links/dv:sru' />">
            <f:then>
              <li class="submenu search">
                  <a href="#" title="Search">Search</a>
                  <f:cObject typoscriptObjectPath="plugin.tx_dfgviewer_sru" />
              </li>
            </f:then>
          </f:if>
      </ul>
    </div>
    <div class="view-functions">
        <ul>
          <f:cObject typoscriptObjectPath="lib.navigation_viewfunction" />
          <li class="tx-dlf-toolsImagemanipulation"><f:cObject typoscriptObjectPath="lib.tools.toolsImagemanipulation" /></li>
        </ul>
        <div class="tx-dlf-toolbox"></div>
    </div>
    <div class="page-control">
          <f:cObject typoscriptObjectPath="lib.navigation_pagecontrol" />
    </div>

  </div>
</f:section>
